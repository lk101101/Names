{% extends "base.html" %}

{% block content %}
	<form action="/data_visualizations" method="post">
		<label for="name">Name:</label>
		<input type="text" id="name" name="name" placeholder="Enter Name" required>
	
		<label for="gender">Gender:</label>
		<select id="gender" name="gender" required>
			<option value="">Please select</option>
			<option value="m">Boy</option>
			<option value="f">Girl</option>
		</select>
	
		<label for="start_year">Start Year:</label>
		<input type="number" id="start_year" name="start_year" min="1880" max="2022" placeholder="1880" required>
	
		<label for="end_year">End Year:</label>
		<input type="number" id="end_year" name="end_year" min="1880" max="2022" placeholder="2022" required>
	
		<input type="submit" value="Generate Chart">
	</form>

	{% if input_data and chart_json and chart_json2 %}
	<h2>Displaying visualizations for {{ request.form['name'] }} between {{ request.form['start_year'] }}-{{ request.form['end_year'] }}</h2>
	<!-- Container for the visualization -->
	<div id="viz1"></div>
	<div id="viz2"></div>

	{% block scripts %}
	<script type="text/javascript">
		// TODO: fix errors
		var chart_spec = {{ chart_json | safe }};
		vegaEmbed('#viz1', chart_spec);

		// 2nd viz
		var chart_spec2 = {{ chart_json2 | safe }};
		vegaEmbed('#viz2', chart_spec2);
	</script>
	{% endblock %}

	{% endif %}
{% endblock %}